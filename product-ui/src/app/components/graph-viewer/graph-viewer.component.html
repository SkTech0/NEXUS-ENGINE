<section class="graph-viewer page">
  <div class="page__header">
    <div>
      <div class="kicker">Graph</div>
      <h1 class="title">Graph Viewer</h1>
      <p class="subtitle">NEXUS Engine dependency graph. Read-only inspection.</p>
    </div>
  </div>

  <!-- Metadata -->
  <section class="card">
    <div class="section__title">Metadata</div>
    <div class="metadata">
      <div class="metadata__row">
        <span class="metadata__label">Description</span>
        <span class="metadata__value">Engine → Intelligence → AI → Trust (dependency flow)</span>
      </div>
      <div class="metadata__row">
        <span class="metadata__label">Nodes</span>
        <span class="metadata__value">{{ nodes.length }}</span>
      </div>
      <div class="metadata__row">
        <span class="metadata__label">Edges</span>
        <span class="metadata__value">{{ edges.length }}</span>
      </div>
    </div>
  </section>

  <!-- Graph -->
  <div class="section__title">Dependency graph</div>
  <section class="card">
    <div class="card__hint">Click a node to select. Selection is for inspection only.</div>
    <div class="graph-viewer__canvas">
      <div class="graph-viewer__nodes">
        @for (node of nodes; track node.id) {
          <button
            type="button"
            class="graph-viewer__node"
            [class.graph-viewer__node--selected]="selectedNodeId === node.id"
            (click)="selectNode(node.id)"
          >
            {{ node.label }}
          </button>
        }
      </div>
      <div class="graph-viewer__edges" aria-hidden="true">
        @for (edge of edges; track edge.id) {
          <div class="graph-viewer__edge" [attr.data-edge]="edge.id"></div>
        }
      </div>
    </div>
    <div class="metadata" *ngIf="selectedNodeId" style="margin-top: 12px;">
      <div class="metadata__row">
        <span class="metadata__label">Selected node</span>
        <span class="metadata__value">{{ selectedNodeId }}</span>
      </div>
    </div>
  </section>
</section>
