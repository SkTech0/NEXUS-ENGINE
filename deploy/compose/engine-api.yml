# Engine-api â€” independent Compose service.
# Run from repo root: docker compose -f deploy/compose/engine-api.yml up -d
services:
  engine-api:
    build:
      context: ../..
      dockerfile: deploy/docker/engine-api.Dockerfile
    ports:
      - "${ENGINE_API_SERVICE_PORT:-5000}:5000"
    environment:
      - ASPNETCORE_URLS=http://0.0.0.0:5000
      - ASPNETCORE_ENVIRONMENT=${NEXUS_ENV:-Development}
    healthcheck:
      test: ["CMD", "wget", "-q", "-O", "-", "http://localhost:5000/health"]
      interval: 10s
      timeout: 5s
      retries: 3
      start_period: 10s
    restart: unless-stopped
